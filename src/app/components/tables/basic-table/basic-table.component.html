<div class="container py-3">
  <div
    class="d-flex flex-column flex-md-row justify-content-between gap-3 mb-3"
  >
    <mat-form-field appearance="outline" class="flex-grow-1">
      <mat-label>Pesquisar</mat-label>
      <input
        matInput
        #buscaDescricao
        (keyup)="filter(buscaDescricao.value)"
        placeholder="Digite o que deseja buscar"
      />
    </mat-form-field>

    <button
      mat-flat-button
      class="d-flex align-items-center gap-2 btn-primary"
      [routerLink]="['/', baseRoute, 'new']"
    >
      <mat-icon>add</mat-icon>
      Cadastrar
    </button>
  </div>

  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort class="mat-table w-100">
      <ng-container matColumnDef="titulo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Título</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.titulo"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>
      <ng-container matColumnDef="nome">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nome</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.nome"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>

      <ng-container matColumnDef="descricao">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Assunto</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.descricao"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>

      <ng-container matColumnDef="editora">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Editora</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.editora"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>

      <ng-container matColumnDef="edicao">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Edição</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.edicao"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>
      <ng-container matColumnDef="anoPublicacao">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Ano de Publicação
        </th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
            [text]="element.anoPublicacao"
            [filter]="dataSource.filter"
          ></highlight-item>
        </td>
      </ng-container>
      <ng-container matColumnDef="valor">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Valor</th>
        <td mat-cell *matCellDef="let element">
          <highlight-item
          [text]="formatarValor(element.valor)"
          [filter]="dataSource.filter"
        ></highlight-item>
        </td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef class="text-end">Ações</th>
        <td mat-cell *matCellDef="let element" class="text-end">
          <button
            mat-icon-button
            color="primary"
            [routerLink]="['/', baseRoute, element.id]"
          >
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="del(element)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columns"></tr>
      <tr mat-row *matRowDef="let row; columns: columns"></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 20, 50]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
